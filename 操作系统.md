# 操作系统

**进程的定义？**

进程是资源分配的基本单位。进程控制块 (Process Control Block, PCB) 描述进程的基本信息和运行状态，所谓的创建进程和撤销进程，都是指对 PCB 的操作。



**线程的定义？**

线程是独立调度的基本单位。一个进程中可以有多个线程，它们共享进程资源。



**进程和线程的区别？**

- 拥有资源：进程是资源分配的基本单位，但是线程不拥有资源，线程可以访问隶属进程的资源。
- 调度：线程是独立调度的基本单位，在同一进程中，线程的切换不会引起进程切换，从一个进程中的线程切换到另一个进程中的线程时，会引起进程切换。

- 系统开销：由于创建或撤销进程时，系统都要为之分配或回收资源，如内存空间、I/O 设备等，所付出的开销远大于创建或撤销线程时的开销。类似地，在进行进程切换时，涉及当前执行进程 CPU 环境的保存及新调度进程 CPU 环境的设置，而线程切换时只需保存和设置少量寄存器内容，开销很小。

- 通信方面：线程间可以通过直接读写同一进程中的数据进行通信，但是进程通信需要借助 IPC。



**进程状态的切换？**

![img](操作系统.assets/68747470733a2f2f67697465652e636f6d2f437943323031382f43532d4e6f7465732f7261772f6d61737465722f646f63732f706963732f50726f6365737353746174652e706e67.png)

- 就绪状态（ready）：等待被调度
- 运行状态（running）
- 阻塞状态（waiting）：等待资源

注意以下内容：
- 只有就绪态和运行态可以相互转换，其它的都是单向转换。就绪状态的进程通过调度算法从而获得 CPU 时间，转为运行状态；而运行状态的进程，在分配给它的 CPU 时间片用完之后就会转为就绪状态，等待下一次调度。
- 阻塞状态是缺少需要的资源从而由运行状态转换而来，但是该资源不包括 CPU 时间，缺少 CPU 时间会从运行态转换为就绪态。



**进程通信？**

进程同步与进程通信很容易混淆，它们的区别在于：

- 进程同步：控制多个进程按一定顺序执行；
- 进程通信：进程间传输信息。

进程通信是一种**手段**，而进程同步是一种**目的**。也可以说，为了能够达到进程同步的目的，需要让进程进行通信，传输一些进程同步所需要的信息。



- 管道：只支持半双工通信（**单向交替传输**）；只能在**父子进程**中使用。

  ![img](操作系统.assets/68747470733a2f2f67697465652e636f6d2f437943323031382f43532d4e6f7465732f7261772f6d61737465722f646f63732f706963732f35336364396164652d623061362d343339392d623464652d3766316662643036636466622e706e67.png)

- 命名管道：去除了父子进程限制，常用于客户-服务器应用程序中，命名管道用作汇聚点，在客户进程和服务器进程之间传递数据。

![img](操作系统.assets/68747470733a2f2f67697465652e636f6d2f437943323031382f43532d4e6f7465732f7261772f6d61737465722f646f63732f706963732f32616335306238312d643932612d343430312d623965632d6632313133656363333037362e706e67.png)

- 消息队列：可以**独立于读写进程**存在，从而避免了 FIFO 中同步管道的打开和关闭时可能产生的困难；避免了 FIFO 的同步阻塞问题，不需要进程自己提供同步方法；读进程可以根据消息类型**有选择地**接收消息，而不像 FIFO 那样只能默认地接收。

- 信号量：它是一个计数器，用于为多个进程提供对共享数据对象的访问。
- 共享存储：允许多个进程**共享**一个给定的存储区。因为数据不需要在进程之间复制，所以这是**最快**的一种 IPC。需要使用信号量用来**同步对共享存储的访问**。多个进程可以将同一个文件映射到它们的地址空间从而实现共享内存。另外 XSI 共享内存不是使用文件，而是使用使用内存的匿名段。
- 套接字：用于不同机器间的进程通信



